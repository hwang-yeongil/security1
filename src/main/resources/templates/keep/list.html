<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout}">
<!-- layout:decorator 삭제됨. layout:decorate로 변경 필요 -->

    <th:block layout:fragment="content">
    <!--/* 검색 영역 */-->
    <!-- <div class="input-group" id="adv-search">
        <select id="searchType" class="form-control" style="width: 100px;">
            <option value="">전체</option>
            <option value="title">제목</option>
            <option value="content">내용</option>
            <option value="writer">작성자</option>
        </select>
        <input type="text" id="searchKeyword" class="form-control" placeholder="키워드를 입력해 주세요." style="width: 300px;" />
        <button type="button" class="btn btn-primary">
            <span aria-hidden="true" class="glyphicon glyphicon-search"></span>
        </button>
    </div> -->
	<div class="btn_wrap text-right" style="margin-bottom: 5px">
        <a th:href="@{/board/write}" class="btn btn-primary waves-effect waves-light">Write</a>
    </div>
    <!--/* 게시글 영역 */-->
    <div class="row justify-content-center" id="list">
	
      <div class="col-md-6 col-lg-4 mb-5" style="border:1px solid gold">
        <div class="portfolio-item mx-auto" style="border:1px solid black">
          <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
            <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
          </div>
          <!-- 게시물 제목 -->
          <p>게시물 제목</p>
          <p>날짜 (우측정렬)</p>
          <!-- <img class="img-fluid" src="assets/img/portfolio/cabin.png" alt="..." /> -->
        </div>
      </div>
    </div>

        <!-- 페이지네이션 Rendering 영역 -->
    </th:block>


    <th:block layout:fragment="script">
    <script th:inline="javascript">
	/*<![CDATA[*/
		window.onload = () => {findAll();}

		/**
		 * 게시글 리스트 조회
		 */
		function findAll() {

			fetch('/api/boards?deleteYn=N').then(response => {
				if (response.ok) {
   					return response.json();
				}
			}).then(json => {
				let html = '';

				if (!json.length) {
					html = '<td colspan="5">등록된 게시글이 없습니다.</td>';
				} else {
					json.forEach((obj, idx) => {
						html += `
			              <div class="col-md-6 col-lg-4 mb-5">
			                <div class="portfolio-item mx-auto  do-memo">
			                    
			                    <!-- 게시물 제목 
			                    
			                    <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
		                        <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
		                    	</div>
			                    -->
			                    
			                   
			                    
			                   <h2 class="m-title"><a href="javascript: void(0);" onclick="goView(${obj.id})">${obj.title}</a></h2>
			                    <p class="m-date">${moment(obj.insertTime).format('YYYY-MM-DD')}</p>
			                    <!-- <img class="img-fluid" src="assets/img/portfolio/cabin.png" alt="..." /> -->
			                </div>
			              </div>
						`;
					});
				}

				document.getElementById('list').innerHTML = html;
			});
		}
		
		function goView(id){
			location.href = `/board/view/${id}`;
		}


	/*]]>*/
    </script>
   
    </th:block>
</html>